<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">

<script
	src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
	integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
	integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
	crossorigin="anonymous"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<title>New Playlist</title>
</head>
<body>
	<div class="container">
		<h1 th:text="'New Playlist'"></h1>
		<div class="row">
			<div class="col-12">
				<form action="#" th:action="@{/search}" method="GET"
					class="card card-sm">
					<div class="card-body row no-gutters align-items-center">
						<div class="col-auto">
							<i class="fas fa-search h4 text-body"></i>
						</div>
						<!--end of col-->
						<div class="col">
							<input th:name="q" th:value="${param.q}"
								class="form-control form-control-lg form-control-borderless"
								type="search" placeholder="Search Track or Artist">
						</div>
						<!--end of col-->
						<div class="col-auto">
							<button class="btn btn-lg btn-success" type="submit">Search</button>
						</div>
						<!--end of col-->
					</div>
				</form>
			</div>
		</div>
		<div class="row" style="margin-top: 10px">
			<div class="col-md-6 col-sm-12">
				<h2>Search</h2>
				<ul class="list-unstyled" style="height: 70vh; overflow-y: auto;">
					<li th:each="item : ${search}" th:id="${item.id}"
						class="border rounded" style="padding: 10px; margin-top: 10px">
						<a target="_blank"
						th:href="'https://open.spotify.com/track/' + ${item.spotify}">Spotify
							link</a>
						<div class="d-flex align-items-center">
							<div class="flex-shrink-0">
								<img th:src="${item.album.picture}" alt="playlist"
									class="img-thumbnail" style="width: 100px">
							</div>
							<div class="flex-grow-1 ms-3">
								<h5 class="mt-0 mb-1" th:text="${item.name}"></h5>
								<p th:text="${item.getArtistsString}"></p>
								<span th:if="${item.preview == Null}"></span> 
								<span th:unless="${item.preview == Null }">
								<Button th:attr="onclick=|$('audio').each((i,x) => x.pause());btn_${item.id}.currentTime = 0;btn_${item.id}.play()|" >Play preview</Button>
								<audio  th:id="'btn_'+${item.id}" controls class="d-none" style="height: revert; width: 100%">
									<source th:src="${item.preview}" type="audio/mpeg">
									Your browser does not support the audio element.
								</audio>
								</span>
							</div>
							<button type="button" class="btn btn-success float-right btn-lg">+</button>
						</div>
					</li>
				</ul>
			</div>
			<div class="col-md-6 col-sm-12">
				<h2>Playlist</h2>
				<ul class="list-unstyled" style="height: 70vh; overflow-y: auto;">
					<li class="border rounded" style="padding: 10px; margin-top: 10px">
						<div class="d-flex align-items-center">
							<div class="flex-shrink-0">
								<img
									src="https://i.scdn.co/image/ab67616d00001e02ab779f2adb1007f0321ecab8"
									alt="playlist" class="img-thumbnail" style="width: 100px">
							</div>
							<div class="flex-grow-1 ms-3">
								<h5 class="mt-0 mb-1">On sait jamais</h5>
								<p>PLK, Niska</p>
								<audio onclick='console.log("dddd")' id="ddd" controls class=""
									style="height: revert; width: 100%">
									<source
										src="https://p.scdn.co/mp3-preview/a527595efe536f1d64d37bcbb7e281dc6d8e4b68?cid=3597042a166c45abb95b0ec082236f0a"
										type="audio/mpeg">
									Your browser does not support the audio element.
								</audio>
							</div>
							<button type="button" class="btn btn-danger float-right btn-lg">x</button>
						</div>
					</li>


				</ul>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	
</script>
</html>
