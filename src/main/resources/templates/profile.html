<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
	integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
	crossorigin="anonymous" />

<script
	src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
	integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
	integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
	crossorigin="anonymous"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<title>New Playlist</title>
</head>
<body>
	<div th:insert="navbar">...</div>
	<div class="container">
		<div class="row" style="margin-top: 10px">
			<div class="col-md-6 col-sm-12">
				<h2>Profile</h2>
				<form>
					<div class="mb-3">
						<label for="inputEmail" class="form-label">Email address</label> <input
							th:value="${user.email}" readonly type="email"
							class="form-control" id="inputEmail">
					</div>
					<div class="mb-3">
						<label for="inputUsername" class="form-label">Username</label> <input
							th:value="${user.nickname}" readonly type="text"
							class="form-control" id="inputUsername">
					</div>
					<div class="mb-3">
						<label for="inputRole" class="form-label">Role</label> <input
							th:value="${user.role}" readonly type="text" class="form-control"
							id="inputRole">
					</div>
				</form>
			</div>
			<div class="col-md-6 col-sm-12">
				<h2>My playlist</h2>
				<ul class="list-unstyled"
					style="max-height: 70vh; overflow-y: auto;">
					<li th:each="item : ${playlist}" class="border"
						style="padding: 10px; margin-top: 10px">
						<div class="d-flex align-items-center">
							<div class="flex-shrink-0">
								<img th:if="${item.picture == Null}" src="https://cdn.pixabay.com/photo/2017/01/09/20/11/music-1967480_1280.png" alt="playlist picture"
									class="img-thumbnail" style="width: 100px">
									<img th:unless="${item.picture == Null}" th:src="${item.picture}" alt="playlist picture"
									class="img-thumbnail" style="width: 100px">
							</div>
							<div class="flex-grow-1 ms-3">
								<a th:href="'playlist/'+${item.id }"><h5 class="mt-0 mb-1"
										th:text="${item.name}"></h5></a>
							</div>
							<button th:attr="data-id=|${item.id}|"
								class="btn btn-danger btndelete">Delete</button>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>
</body>
<script>
$(".btndelete").each((i,x) => {
	x.addEventListener("click",e =>{
		if (window.confirm("Are you sure?"))
			{
		fetch("/api/playlist/"+e.target.dataset.id,{method:"DELETE"})
		.then(_ => location.reload())
			}
	});
});
</script>
</html>
